From 8656c60e9663148166c8bd2cfd910a4423b2588d Mon Sep 17 00:00:00 2001
From: Patrick Griffis <tingping@tingping.se>
Date: Thu, 13 Apr 2017 13:06:51 -0400
Subject: [PATCH] build: Make man page generation optional

This doesn't work when building a packages
---
 configure.ac | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index fe71139..524cd8c 100644
--- a/configure.ac
+++ b/configure.ac
@@ -32,7 +32,13 @@ AS_IF([test "$with_docs" = "yes"], [
 ])
 AM_CONDITIONAL([WITH_DOCS], [test "$with_docs" = "yes"])
 
-AC_PATH_PROG([HELP2MAN], [help2man], [no])
+AC_ARG_WITH(help2man, AS_HELP_STRING([--with-help2man], [Build man page automatically]),
+            [with_help2man=$withval], [with_help2man=no])
+AS_IF([test "$with_help2man" = "yes"], [
+  AC_PATH_PROG([HELP2MAN], [help2man], [no])
+], [
+  HELP2MAN=no
+])
 AM_CONDITIONAL([HAVE_HELP2MAN], [test "$HELP2MAN" != "no"])
 
 AC_CONFIG_FILES([
